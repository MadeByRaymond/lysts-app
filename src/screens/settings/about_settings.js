import React, {useEffect, useState} from 'react';
import { Text, StyleSheet, View, TouchableOpacity, Linking } from 'react-native';
import Svg, { Path } from "react-native-svg";
import NetInfo from "@react-native-community/netinfo";

import NoConnectionAlert from '../../components/Alerts/noConnection/noConnectionAlert';
import {goToScreen} from '../../includes/functions'

let unsubscribeNetworkUpdate;
let prevComponentId;

const goToWebView = (compID, uri, title) => {
  goToScreen(compID,'com.lysts.screen.webView', {uri}, {topBar: {
    title: {
        text: title
    },
    visible: true,
    drawBehind: false,
    animate: true,
  }});
}

export default function about_settings(props) {
  const [hasNetworkConnection, setNetworkConnection] = useState(true);

  useEffect(() => {
    unsubscribeNetworkUpdate = NetInfo.addEventListener(state => {
      // console.log("Connection type", state.type);
      // console.log("Is connected?", state.isConnected);
      setNetworkConnection(state.isConnected)
    });

    prevComponentId = global.activeComponentId;
    global.activeComponentId = props.componentId;

    return () => {
      unsubscribeNetworkUpdate()
      global.activeComponentId = prevComponentId;
    };
  }, []);

  return (
    <View style={styles.container}>
        <View style={styles.titleWrapper}><Text style={styles.title}>Helpful information</Text></View>
        <View style={styles.settingsWrapper}>
          <TouchableOpacity activeOpacity={0.8} onPress={()=>{goToWebView(props.componentId, "https://lystsapp.com/app_updates?hide_header=true&hide_footer=true", "App Updates")}}>
            <View style={styles.settingRow}>
              <View style={styles.settingSVGWrapper}>
                <Svg width={35} height={30} viewBox="0 0 53 53" fill="none">
                  <Path
                    d="M47.388 11.875a.65.65 0 00-1.066.74 24.475 24.475 0 014.381 14.025c0 13.576-11.045 24.621-24.622 24.621-13.576 0-24.622-11.045-24.622-24.622 0-13.576 11.046-24.621 24.622-24.621 5.076 0 9.95 1.531 14.093 4.43a.649.649 0 10.744-1.064A25.758 25.758 0 0026.081.72C11.79.72.161 12.348.161 26.64c0 14.292 11.628 25.92 25.92 25.92 14.292 0 25.92-11.628 25.92-25.92a25.768 25.768 0 00-4.613-14.765z"
                    fill="#846F75"
                  />
                  <Path
                    d="M44.875 26.64c0 10.363-8.431 18.794-18.794 18.794-10.364 0-18.795-8.431-18.795-18.795 0-10.363 8.431-18.794 18.794-18.794 3.416 0 6.76.925 9.671 2.676a.65.65 0 00.67-1.113 20.062 20.062 0 00-10.34-2.86C15 6.547 5.988 15.56 5.988 26.64c0 11.079 9.013 20.092 20.093 20.092 11.079 0 20.092-9.014 20.092-20.093 0-3.517-.922-6.979-2.667-10.01a.65.65 0 00-1.125.647 18.79 18.79 0 012.494 9.363z"
                    fill="#846F75"
                  />
                  <Path
                    d="M26.08 39.396c-7.033 0-12.756-5.723-12.756-12.757 0-7.033 5.723-12.756 12.756-12.756 2.004 0 3.921.451 5.699 1.34a.649.649 0 00.58-1.16 13.91 13.91 0 00-6.279-1.478c-7.75 0-14.054 6.305-14.054 14.054 0 7.75 6.305 14.055 14.054 14.055 7.75 0 14.054-6.305 14.054-14.055 0-1.897-.371-3.737-1.105-5.47a.65.65 0 00-1.195.505 12.671 12.671 0 011.002 4.965c0 7.034-5.722 12.757-12.756 12.757z"
                    fill="#846F75"
                  />
                  <Path
                    d="M25.483 28.695c-.316 0-.622-.125-.853-.356-.3-.3-.42-.726-.322-1.139l2.344-9.789c.113-.475.483-.824.964-.91.48-.086.948.112 1.22.517l1.49 2.22L44.13 5.434c.229-.229.533-.355.857-.355.323 0 .627.126.856.355l1.691 1.691a1.213 1.213 0 010 1.714L33.731 22.644l2.22 1.489c.406.272.604.74.517 1.22-.086.481-.435.85-.91.964l-9.79 2.344c-.094.023-.19.034-.285.034zm2.386-10.79l-2.266 9.46 9.461-2.264-2.712-1.82a.65.65 0 01-.097-.998L46.557 7.981l-1.57-1.569-14.302 14.302a.646.646 0 01-.997-.097l-1.82-2.712zm16.72-12.012h.003-.002zM21.756 27.727h-2.612a.649.649 0 110-1.298h2.612a.649.649 0 110 1.298zM25.891 34.473a.649.649 0 01-.649-.649v-2.611a.649.649 0 111.298 0v2.611c0 .359-.29.65-.649.65zM22.965 24.802a.647.647 0 01-.46-.19l-1.846-1.846a.649.649 0 11.918-.918l1.846 1.847a.649.649 0 01-.458 1.107zM30.66 32.498a.647.647 0 01-.459-.19l-1.847-1.847a.649.649 0 11.918-.918l1.847 1.847a.649.649 0 01-.459 1.108zM21.12 32.497a.649.649 0 01-.459-1.108l1.848-1.847a.649.649 0 11.917.918l-1.846 1.847a.648.648 0 01-.46.19z"
                    fill="#65C1D6"
                  />
                </Svg>
              </View>
              <View style={styles.settingTextWrapper}><Text style={styles.settingText}>App updates</Text></View>
            </View>
          </TouchableOpacity>
          
          <TouchableOpacity activeOpacity={0.8} onPress={()=>{goToWebView(props.componentId, "https://lystsapp.com/privacy_policy?hide_header=true&hide_footer=true", "Data / Privacy Policy")}}>
            <View style={styles.settingRow}>
              <View style={styles.settingSVGWrapper}>
                <Svg width={35} height={32} viewBox="0 0 40 53" fill="none">
                  <Path
                    d="M14.379 41.584h-8.01a.624.624 0 110-1.248h8.01a.624.624 0 110 1.248zM29.42 41.584h-8.01a.624.624 0 110-1.248h8.01a.624.624 0 110 1.248z"
                    fill="#A58BC9"
                  />
                  <Path
                    d="M34.984 47.902V6.364a.624.624 0 00-.625-.624h-6.482a.624.624 0 100 1.249h5.858v40.289H2.17V6.988h5.758a.624.624 0 100-1.248H1.546a.624.624 0 00-.624.624v41.538c0 .345.28.625.624.625H34.36c.345 0 .625-.28.625-.625z"
                    fill="#846F75"
                  />
                  <Path
                    d="M37.144 8.492a.624.624 0 10-1.246.082l2.687 40.825-31.496 2.073-.097-1.466a.631.631 0 00-.664-.582.624.624 0 00-.582.664l.138 2.089a.624.624 0 00.664.582l32.742-2.156a.624.624 0 00.582-.663L37.144 8.492z"
                    fill="#846F75"
                  />
                  <Path
                    d="M29.42 21.115H6.37a.624.624 0 100 1.249h23.05a.624.624 0 100-1.25zM29.42 25.628H6.37a.624.624 0 100 1.248h23.05a.624.624 0 100-1.248zM29.42 30.14H6.37a.624.624 0 100 1.25h23.05a.624.624 0 100-1.25zM12.216 16.288l-.76 2.694a.625.625 0 00.85.742l3.555-1.547a8.76 8.76 0 002.09.254c4.828 0 8.756-3.928 8.756-8.755 0-4.828-3.928-8.756-8.755-8.756-4.828 0-8.756 3.928-8.756 8.756a8.703 8.703 0 003.02 6.612zm5.736-14.119c4.139 0 7.506 3.367 7.506 7.507 0 4.139-3.367 7.506-7.506 7.506-.667 0-1.333-.089-1.979-.265a.625.625 0 00-.413.03l-2.545 1.106.514-1.817a.625.625 0 00-.215-.66 7.468 7.468 0 01-2.869-5.9c0-4.14 3.368-7.507 7.507-7.507z"
                    fill="#846F75"
                  />
                  <Path
                    d="M13.36 11.268a1.774 1.774 0 01-1.772-1.772c0-.977.795-1.772 1.772-1.772s1.772.795 1.772 1.772-.795 1.772-1.772 1.772zm0-2.296a.524.524 0 10.001 1.048.524.524 0 00-.001-1.048zM17.95 11.267a1.774 1.774 0 01-1.771-1.772c0-.978.795-1.773 1.772-1.773s1.772.795 1.772 1.773c0 .977-.795 1.772-1.772 1.772zm0-2.296a.524.524 0 10.002 1.048.524.524 0 00-.001-1.048zM22.54 11.267a1.774 1.774 0 01-1.771-1.772c0-.978.795-1.773 1.772-1.773s1.772.795 1.772 1.773c0 .977-.795 1.772-1.772 1.772zm0-2.296a.524.524 0 10.002 1.048.524.524 0 00-.001-1.048z"
                    fill="#A58BC9"
                  />
                </Svg>
              </View>
              <View style={styles.settingTextWrapper}><Text style={styles.settingText}>Data policy</Text></View>
            </View>
          </TouchableOpacity>
          
          <TouchableOpacity activeOpacity={0.8} onPress={()=>{goToWebView(props.componentId, "https://lystsapp.com/terms_of_service?hide_header=true&hide_footer=true", "Terms of Service")}}>
            <View style={styles.settingRow}>
              <View style={styles.settingSVGWrapper}>
                <Svg width={35} height={30} viewBox="0 0 58 51" fill="none">
                  <Path
                    d="M57.158 6.122h-9.116a.722.722 0 110-1.443h9.116a.722.722 0 110 1.443zM38.982 46.394H1.051a.722.722 0 110-1.443h37.931a.722.722 0 110 1.443z"
                    fill="#EBE7F2"
                  />
                  <Path
                    d="M33.995 36.456h-4.916a.722.722 0 110-1.443h4.916a.722.722 0 110 1.443zM26.193 36.456h-8.898a.722.722 0 110-1.443h8.898a.722.722 0 110 1.443zM34.486 31.742h-8.861a.722.722 0 110-1.444h8.861a.722.722 0 110 1.444zM22.74 31.742h-5.445a.722.722 0 110-1.444h5.444a.722.722 0 110 1.444zM38.3 27.026H29.69a.722.722 0 110-1.443H38.3a.722.722 0 110 1.443zM26.804 27.026h-9.51a.722.722 0 110-1.443h9.51a.722.722 0 110 1.443zM41.187 22.31h-8.68a.722.722 0 110-1.443h8.68a.722.722 0 110 1.444zM29.62 22.31H17.295a.722.722 0 110-1.443H29.62a.722.722 0 110 1.444zM38.299 17.596H24.844a.722.722 0 110-1.443h13.455a.722.722 0 110 1.443zM21.958 17.596h-4.663a.722.722 0 110-1.443h4.662a.722.722 0 010 1.443zM28.185 12.881h-10.89a.722.722 0 110-1.443h10.89a.722.722 0 110 1.443z"
                    fill="#ED9ABC"
                  />
                  <Path
                    d="M48.051 33.347a.722.722 0 00-.722.722v10.94a3.84 3.84 0 01-3.836 3.837 3.84 3.84 0 01-3.837-3.837v-4.558a.722.722 0 00-.721-.722H1.003a.722.722 0 00-.722.722v4.558a5.286 5.286 0 005.28 5.28h37.932a5.286 5.286 0 005.28-5.28V34.07a.722.722 0 00-.722-.722zM5.561 48.846a3.84 3.84 0 01-3.836-3.837v-3.836h36.488v3.836a5.26 5.26 0 001.663 3.837H5.562zM52.6.12H14.676a5.286 5.286 0 00-5.28 5.28v32.164a.722.722 0 101.444 0V5.4a3.84 3.84 0 013.836-3.836h34.308A5.26 5.26 0 0047.32 5.4V9.96c0 .027.005.054.008.08v6.435a.722.722 0 101.444 0V9.96c0-.028-.006-.055-.009-.082V5.4A3.84 3.84 0 0152.6 1.564 3.84 3.84 0 0156.437 5.4v3.837H52.6a.722.722 0 100 1.443h4.558a.722.722 0 00.722-.721V5.4A5.286 5.286 0 0052.6.12z"
                    fill="#846F75"
                  />
                  <Path
                    d="M55.74 16.518a3.54 3.54 0 00-5 0l-1.935 1.935-10.044 10.043a3.346 3.346 0 00-.815 1.334l-1.75 5.434a1.42 1.42 0 00.349 1.445 1.42 1.42 0 001.444.349l5.435-1.75c.5-.161.962-.443 1.334-.815l10.044-10.044 1.934-1.934a3.54 3.54 0 000-5.001l-.995-.995zM44.248 32.963l-3.955-3.956 9.023-9.024 3.956 3.956-9.024 9.024zm-6.666 2.71l.34-1.054.715.715-1.055.34zm2.598-.836l-1.762-1.762.903-2.802c.016-.048.036-.095.055-.142l3.748 3.748c-.047.02-.093.04-.141.055l-2.803.903zm15.536-13.342l-1.424 1.424-3.955-3.956 1.424-1.424a2.088 2.088 0 011.48-.612c.536 0 1.072.204 1.48.612l.995.995a2.096 2.096 0 010 2.96z"
                    fill="#846F75"
                  />
                </Svg>
              </View>
              <View style={styles.settingTextWrapper}><Text style={styles.settingText}>Terms of use</Text></View>
            </View>
          </TouchableOpacity>
          
          <TouchableOpacity activeOpacity={0.8} onPress={()=>{Linking.openURL("mailto:contact@lystsapp.com?subject=&body=")}}>
            <View style={styles.settingRow}>
              <View style={styles.settingSVGWrapper}>
                <Svg width={35} height={30} viewBox="0 0 58 56" fill="none">
                  <Path
                    d="M8.864 23.39a.693.693 0 01-.666-.876C10.79 13.175 19.378 6.653 29.08 6.653c.144 0 .288.001.432.004a.69.69 0 01-.027 1.382 19.65 19.65 0 00-.405-.005c-9.084 0-17.124 6.107-19.55 14.85a.691.691 0 01-.666.506zM29.081 49.992c-.291 0-.581-.006-.87-.017a.691.691 0 01.055-1.38c.27.01.542.016.815.016 9.434 0 17.764-6.674 19.806-15.87a.69.69 0 011.348.3 21.75 21.75 0 01-7.504 12.112 21.714 21.714 0 01-13.65 4.84z"
                    fill="#65C1D6"
                  />
                  <Path
                    d="M16.326 23.554C7.479 23.554.28 30.752.28 39.599c0 3.092.878 6.08 2.54 8.666L.651 54.35a.69.69 0 00.882.882l6.072-2.166a15.959 15.959 0 008.72 2.577c8.848 0 16.045-7.198 16.045-16.045 0-8.847-7.197-16.044-16.044-16.044zm0 30.708c-2.955 0-5.804-.876-8.239-2.533a.691.691 0 00-.62-.08L2.44 53.442l1.797-5.037a.69.69 0 00-.078-.618 14.59 14.59 0 01-2.497-8.188c0-8.086 6.577-14.663 14.663-14.663 8.085 0 14.662 6.578 14.662 14.663s-6.577 14.663-14.662 14.663z"
                    fill="#846F75"
                  />
                  <Path
                    d="M55.342 25.151a15.964 15.964 0 002.54-8.667C57.882 7.637 50.685.44 41.837.44c-8.847 0-16.044 7.197-16.044 16.044 0 8.847 7.197 16.045 16.044 16.045 3.115 0 6.123-.89 8.721-2.577l6.072 2.167a.69.69 0 00.883-.883l-2.171-6.085zm-4.645 3.384a.689.689 0 00-.62.08 14.585 14.585 0 01-8.24 2.532c-8.084 0-14.662-6.578-14.662-14.663S33.753 1.821 41.838 1.821 56.5 8.4 56.5 16.484a14.59 14.59 0 01-2.498 8.189.69.69 0 00-.078.618l1.797 5.037-5.025-1.793z"
                    fill="#846F75"
                  />
                  <Path
                    d="M16.15 50.798a2.58 2.58 0 01-1.838-.761 2.576 2.576 0 01-.758-1.836 2.6 2.6 0 01.74-1.822 2.56 2.56 0 011.857-.785c.696 0 1.351.272 1.844.766.492.492.763 1.146.763 1.84 0 .707-.28 1.368-.787 1.86a2.6 2.6 0 01-1.82.738zm0-3.823c-.33 0-.637.13-.865.365a1.227 1.227 0 00.004 1.72 1.227 1.227 0 001.72.009 1.215 1.215 0 00.008-1.732 1.22 1.22 0 00-.866-.362zM16.385 44.603h-.547a2.052 2.052 0 01-1.456-.61 2.053 2.053 0 01-.584-1.466c.018-1.047.193-1.92.532-2.667.335-.737.893-1.464 1.707-2.223.66-.617.912-.925 1.003-1.054.115-.161.196-.323.244-.48.037-.123.08-.353.08-.75 0-.44-.079-.75-.235-.918-.047-.05-.174-.187-.653-.187-.591 0-.761.177-.825.243-.138.143-.28.355-.286.848a2.048 2.048 0 01-2.04 2.01h-.547c-.541 0-1.07-.222-1.451-.607a2.053 2.053 0 01-.589-1.458c.02-1.657.59-3.033 1.69-4.091 1.086-1.043 2.448-1.572 4.049-1.572 1.641 0 2.994.554 4.02 1.647.992 1.055 1.495 2.435 1.495 4.101 0 1.095-.227 2.1-.674 2.989-.42.838-1.149 1.72-2.224 2.696a2.16 2.16 0 01-.116.098c-.18.14-.553.432-.553 1.411 0 1.125-.915 2.04-2.04 2.04zm.091-11.737c.726 0 1.271.206 1.665.628.408.44.605 1.047.605 1.86 0 .453-.047.838-.14 1.146-.09.3-.237.596-.438.88-.216.306-.616.732-1.189 1.267-.678.633-1.133 1.216-1.392 1.785-.26.57-.393 1.264-.408 2.12a.661.661 0 00.659.67h.547a.659.659 0 00.658-.659c0-1.113.355-1.93 1.085-2.5a.588.588 0 00.037-.032c.948-.86 1.575-1.61 1.919-2.294.349-.694.526-1.491.526-2.368 0-1.303-.378-2.365-1.121-3.156-.755-.803-1.768-1.21-3.013-1.21-1.232 0-2.272.398-3.09 1.186-.825.792-1.251 1.839-1.267 3.111a.662.662 0 00.659.667h.547a.661.661 0 00.658-.649c.01-.742.23-1.326.672-1.785.432-.449 1.027-.667 1.821-.667zM48.055 22.706h-5.014a.69.69 0 110-1.381h5.014a.69.69 0 110 1.381zM39.775 22.706h-6.16a.69.69 0 110-1.381h6.16a.69.69 0 110 1.381zM50.06 17.371h-2.42a.69.69 0 110-1.381h2.42a.69.69 0 110 1.381zM44.375 17.371h-10.76a.69.69 0 110-1.381h10.76a.69.69 0 110 1.381zM47.562 12.035H33.615a.69.69 0 110-1.381h13.947a.69.69 0 110 1.381z"
                    fill="#65C1D6"
                  />
                </Svg>
              </View>
              <View style={styles.settingTextWrapper}><Text style={styles.settingText}>Contact us</Text></View>
            </View>
          </TouchableOpacity>
        </View>
        {hasNetworkConnection ? null : <NoConnectionAlert />}
    </View>
  )
}


const styles = StyleSheet.create({
    container:{
        flex: 1,
        backgroundColor: '#1A2C34',
        backgroundColor: '#FCFCFC'
    },
    titleWrapper:{
      marginTop:30
    },
    title:{
      paddingHorizontal: 25,
      paddingTop: 10,
      paddingBottom: 3,
      color: '#515D70',
      fontSize: 15,
      fontFamily: 'Poppins-Medium'
    },


    settingsWrapper:{
      paddingHorizontal: 25,
      paddingVertical: 20
    },
    settingRow:{
        flexDirection:'row',
        alignItems: 'center',
        marginBottom: 20
    },
    settingSVGWrapper:{
        marginRight: 10
    },
    settingTextWrapper:{
        paddingTop: 2
    },
    settingText:{
        color: '#515D70',
        fontSize: 16.5,
        fontFamily: 'Poppins-Regular'
    }
})
